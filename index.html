<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ðŸ’–Date avec ma future femmeðŸ’–</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    .gradient-background {
      background: linear-gradient(
        180deg,
        rgba(255,208,229,1) 0%,
        rgba(255,232,242,1) 36%,
        rgba(255,255,255,1) 100%
      );
    }

    .bounce {
      animation: bounce 1.6s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    button { touch-action: manipulation; }

    .escape {
      position: fixed !important;
      z-index: 9999;
    }
  </style>
</head>

<body class="gradient-background">
  <div class="flex items-center justify-center min-h-screen px-4">
    <div class="flex flex-col items-center w-full max-w-md py-10">

      <!-- IMAGE -->
      <img
        id="imageDisplay"
        src="./1.jpeg"
        class="rounded-2xl h-[320px] w-full object-cover shadow-lg"
        alt="photo"
      />

      <!-- QUESTION -->
      <h2
        id="valentineQuestion"
        class="text-3xl font-bold italic text-[#bd1e59] text-center mt-6"
      >
        Tu veux aller Ã  un date avec moi ?
      </h2>

      <!-- BOUTONS -->
      <div class="flex gap-4 mt-8 w-full" id="responseButtons">
        <button
          id="yesButton"
          class="bounce flex-1 bg-green-500 active:bg-green-400 text-white rounded-2xl px-6 py-4 text-xl shadow-md"
        >
          Oui mon bb d'amour ðŸ’•
        </button>

        <button
          id="noButton"
          class="flex-1 bg-red-500 active:bg-red-600 text-white rounded-2xl px-6 py-4 text-xl shadow-md"
        >
          Non, tu pues
        </button>
      </div>

      <p
        id="afterYes"
        class="hidden mt-6 text-lg text-[#bd1e59] font-semibold text-center"
      ></p>
    </div>
  </div>

  <script type="module">
    import confetti from "https://cdn.skypack.dev/canvas-confetti";

    const yesButton = document.getElementById("yesButton");
    const noButton = document.getElementById("noButton");
    const imageDisplay = document.getElementById("imageDisplay");
    const valentineQuestion = document.getElementById("valentineQuestion");
    const responseButtons = document.getElementById("responseButtons");
    const afterYes = document.getElementById("afterYes");

    let noClickCount = 0;

    const imagePaths = [
      "./1.jpeg",
      "./2.jpeg",
      "./3.jpeg",
      "./4.jpeg",
      "./5.jpeg"
    ];

    const texts = [
      "Non",
      "T'es sÃ»re de toi?ðŸ¤¨",
      "Ella... ?ðŸ˜¡",
      "Je vais faire les gros yeux ðŸ˜³",
      "Attends j'arrive te tuer ðŸ¤¬"
    ];

    function vibe(ms = 30) {
      if (navigator.vibrate) navigator.vibrate(ms);
    }

    function moveNoButton() {
      noButton.classList.add("escape");

      const padding = 20;
      const rect = noButton.getBoundingClientRect();

      const maxX = window.innerWidth - rect.width - padding;
      const maxY = window.innerHeight - rect.height - padding;

      const x = Math.random() * maxX;
      const y = Math.random() * maxY;

      noButton.style.left = `${x}px`;
      noButton.style.top = `${y}px`;
    }

    // Mobile : le bouton NO fuit avant mÃªme le clic ðŸ˜ˆ
    noButton.addEventListener("touchstart", () => {
      vibe(20);
      moveNoButton();
    });

    // Clic NO
    noButton.addEventListener("click", () => {
      vibe(40);

      if (noClickCount < imagePaths.length - 1) {
        noClickCount++;
        imageDisplay.src = imagePaths[noClickCount];
      }

      if (noClickCount < texts.length) {
        noButton.textContent = texts[noClickCount];
      }

      yesButton.style.transform = `scale(${1 + noClickCount * 0.25})`;
      moveNoButton();
    });

    // YES â¤ï¸
    yesButton.addEventListener("click", () => {
      imageDisplay.src = "./coeur.jpeg";
      valentineQuestion.textContent = "Yesss ðŸ’– Jâ€™ai trop hÃ¢te !!!";
      responseButtons.style.display = "none";
      afterYes.textContent = "PrÃ©pare-toiâ€¦ Ã§a va Ãªtre incroyable âœ¨";
      afterYes.classList.remove("hidden");

      confetti({
        particleCount: 180,
        spread: 90,
        origin: { y: 0.6 }
      });

      vibe(120);
    });
  </script>
</body>
</html>
